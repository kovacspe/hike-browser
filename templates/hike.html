<head>
    <link rel="stylesheet" href="../static/styles/style.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
</head>

<body>
    <h1>{{name}}</h1>

    <div>
        <h2>Zhrnutie</h2>
        <table>
            <tr>
                <td>Dĺžka:</td>
                <td>{{'%0.2f'| format(stats.length|float)}}</td>
            </tr>
            <tr>
                <td>Uphill:</td>
                <td>{{stats.uphill|int}}</td>
            </tr>
            <tr>
                <td>Downhill:</td>
                <td>{{stats.downhill|int}}</td>
            </tr>
            <tr>
                <td>Čas:</td>
                <td>{{stats.time}}</td>
            </tr>
        </table>
    </div>
    <div>
        <h2>Itenerár:</h2>
        <table id="iterinary">
            {% for point in schedule %}
            <tr>
                <td>
                    {% if point.travel_by=='foot' %}
                    <span class="material-icons">hiking</span>
                    {% elif point.travel_by=='car' %}
                    <span class="material-icons">car</span>
                    {% endif %}
                </td>

                <td>{% if point.from %}{{point.from}}{% endif %}</td>
                <td>{% if point.to and point.from %}-{% endif %}</td>
                <td>{% if point.to %}{{point.to}}{% endif %}</td>
                <td>{{point.name}}</td>
                {% if point.stats %}
                <td>{{point.stats.uphill|int}}</td>
                <td>{{point.stats.downhill|int}}</td>
                <td>{{'%0.2f'| format(point.stats.length|float)}}</td>

                {% else %}
                <td colspan="3">{{point.description or ''}}</td>
                {% endif %}

            </tr>
            {% endfor %}
        </table>
    </div>
    <div id="map" style="width: 600px; height: 400px;"></div>
    <script>

        const map = L.map('map').setView([49.151400, 20.962358], 13);

        const tiles = L.tileLayer('https://outdoor.tiles.freemap.sk/{z}/{x}/{y}', {
            maxZoom: 19
        }).addTo(map);

        var greenIcon = L.divIcon({
            className: 'material-icons',
            html: `<span class="material-icons">hiking</span>`
        })
        L.marker([49.151400, 20.962358], { icon: greenIcon }).addTo(map);
        L.marker([49.151400, 21.983368], { icon: greenIcon }).addTo(map);
        L.marker([49.151400, 21.004378], { icon: greenIcon }).addTo(map);



    </script>
</body>